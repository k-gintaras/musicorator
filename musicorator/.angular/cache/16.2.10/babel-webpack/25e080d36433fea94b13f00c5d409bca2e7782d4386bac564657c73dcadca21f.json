{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/chips\";\nimport * as i3 from \"@angular/material/button\";\nconst _c0 = function (a0) {\n  return {\n    \"font-weight\": a0,\n    \"font-size\": \"13px\",\n    \"line-height\": \"25px\",\n    \"padding-left\": \"2px\",\n    \"padding-right\": \"2px\"\n  };\n};\nfunction MatrixStepperComponent_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function MatrixStepperComponent_button_2_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const row_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.setCurrentRow(row_r2));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, ctx_r0.currentRow.title === row_r2.title ? \"bold\" : \"normal\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r2.title, \" \");\n  }\n}\nconst _c1 = function (a1, a2) {\n  return {\n    color: \"white\",\n    border: a1,\n    \"background-color\": a2,\n    \"min-height\": \"25px\",\n    \"font-size\": \"small\"\n  };\n};\nfunction MatrixStepperComponent_mat_chip_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 8);\n    i0.ɵɵlistener(\"click\", function MatrixStepperComponent_mat_chip_8_Template_mat_chip_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const tag_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      ctx_r6.tryAddValidatedWithGroup(tag_r5, ctx_r6.resultsArray, false);\n      return i0.ɵɵresetView(ctx_r6.showNext());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(2, _c1, ctx_r1.isThisTagSelected(tag_r5.name) ? \"2px solid black\" : \"\", tag_r5.color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r5.name, \" \");\n  }\n}\nexport let MatrixStepperComponent = /*#__PURE__*/(() => {\n  class MatrixStepperComponent {\n    constructor() {\n      this.currentRow = {\n        title: '',\n        value: [{\n          name: '',\n          color: ''\n        }]\n      };\n      this.selectedItem = new EventEmitter();\n      this.resultsArray = [];\n      this.matrix = [this.currentRow];\n      this.i = 0;\n    }\n    ngOnInit() {\n      if (this.matrix) {\n        if (this.matrix.length > 0) {\n          this.currentRow = this.matrix[0];\n        }\n      }\n    }\n    ngOnDestroy() {\n      if (this.selectedItem) {\n        this.selectedItem.unsubscribe();\n      }\n    }\n    ngOnChanges(changes) {\n      if (changes.matrix) {\n        if (changes.matrix.currentValue !== changes.matrix.previousValue) {\n          if (this.matrix) {\n            if (this.matrix.length > 0) {\n              this.currentRow = this.matrix[0];\n            }\n          }\n        }\n      }\n    }\n    onSelectedItem(item, selected) {\n      const updated = item;\n      updated.isSelected = selected;\n      this.selectedItem.emit(updated);\n    }\n    tryAddValidatedWithGroup(value, arr, isRemoveNonUnique) {\n      const name = value.name;\n      const unique = this.isNotIn(name, arr);\n      if (unique) {\n        if ((name || '').trim()) {\n          arr.push(name.trim().toLowerCase());\n          this.onSelectedItem(value, true);\n        }\n      } else {\n        // this.feedback('Already added.', true);\n        if (isRemoveNonUnique) {\n          this.removeFromArr(name, arr);\n          this.onSelectedItem(value, false);\n        }\n      }\n    }\n    isThisTagSelected(tag) {\n      return !this.isNotIn(tag, this.resultsArray);\n    }\n    showNext() {\n      this.i++;\n      if (this.i > this.matrix.length - 1) {\n        this.i = 0;\n      }\n      this.currentRow = this.matrix[this.i];\n    }\n    setCurrentRow(row) {\n      this.currentRow = row;\n      this.i = this.getCurrentRowPosition();\n    }\n    getCurrentRowPosition() {\n      for (let j = 0; j < this.matrix.length; j++) {\n        const row = this.matrix[j].title;\n        if (this.currentRow.title === row) {\n          return j;\n        }\n      }\n      return 0;\n    }\n    addUniqueItem(arr, item) {\n      if (arr.indexOf(item) === -1) {\n        arr.push(item);\n      }\n    }\n    removeFromArr(tag, arr) {\n      const index = arr.indexOf(tag);\n      if (index >= 0) {\n        arr.splice(index, 1);\n      }\n    }\n    isNotIn(val, arr) {\n      return !(arr.indexOf(val) > -1);\n    }\n    static #_ = this.ɵfac = function MatrixStepperComponent_Factory(t) {\n      return new (t || MatrixStepperComponent)();\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MatrixStepperComponent,\n      selectors: [[\"app-matrix-stepper\"]],\n      inputs: {\n        resultsArray: \"resultsArray\",\n        matrix: \"matrix\"\n      },\n      outputs: {\n        selectedItem: \"selectedItem\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 9,\n      vars: 3,\n      consts: [[1, \"container-fluid\", \"unselectable\", 2, \"min-height\", \"100px\"], [1, \"row\", 2, \"margin-bottom\", \"10px\"], [\"class\", \"low-height\", \"mat-raised-button\", \"\", 3, \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"col-2\"], [1, \"col-10\"], [3, \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-raised-button\", \"\", 1, \"low-height\", 3, \"ngStyle\", \"click\"], [3, \"ngStyle\", \"click\"]],\n      template: function MatrixStepperComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtemplate(2, MatrixStepperComponent_button_2_Template, 2, 4, \"button\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4);\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"mat-chip-list\");\n          i0.ɵɵtemplate(8, MatrixStepperComponent_mat_chip_8_Template, 2, 5, \"mat-chip\", 6);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.matrix);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentRow.title, \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.currentRow.value);\n        }\n      },\n      dependencies: [i1.NgForOf, i1.NgStyle, i2.MatChip, i3.MatButton]\n    });\n  }\n  return MatrixStepperComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}